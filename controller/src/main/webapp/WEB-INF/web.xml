<?xml version="1.0" encoding="UTF-8"?>

<web-app xmlns="http://xmlns.jcp.org/xml/ns/javaee"
     	 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     	 xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee 
     						 http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd"
     	 version="3.1">
	
	<display-name>Company Management App</display-name>
	
	<servlet>
        <servlet-name>cma</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>cma</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping>
    
	<context-param>
		<param-name>contextConfigLocation</param-name>
		<param-value>
			classpath*:app-context.xml
			classpath*:services-context.xml
			classpath*:persistence-context.xml
		</param-value>
	</context-param>
	<context-param>
		<param-name>spring.profiles.active</param-name>
		<param-value>dev</param-value>
	</context-param>
	
	<listener>
		<listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
	</listener>
	
	<filter>
		<description>
			Open a Spring JPA Entity Manager instance at the beginning of each HTTP request and keep the instance available
			until the request processing has finished fully. This allows service and data access layers to have full access
			to JPA loaded entities and their associations throughout the full lifetime of the HTTP request and avoid
			lazy loading exceptions.
		</description>
		
		<display-name>entityManagerFilter</display-name>
		
		<filter-name>entityManagerFilter</filter-name>
		
		<filter-class>org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter</filter-class>
		
		<init-param>
			<param-name>entityManagerFactoryBeanName</param-name>
			<param-value>entityManagerFactory</param-value>
		</init-param>
						
	</filter>
	
	<filter-mapping>
		<filter-name>entityManagerFilter</filter-name>
		<url-pattern>/*</url-pattern>
	</filter-mapping>
	
	<session-config>
		<session-timeout>60</session-timeout>
	</session-config>
	
</web-app>